<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AnimeAV1 ‚Äî Inicio</title>
  <link rel="stylesheet" href="../css/universalCss.css" type="text/css">
  <link rel="stylesheet" href="../css/divs.css" type="text/css">
  <link rel="stylesheet" href="../css/pInicio.css" type="text/css">
</head>

    <div id="login-modal" class="login-modal" onclick="closeOnOutsideClick(event)">
      <div class="login-content">
        <span class="close" onclick="closeLogin()">&times;</span>
        <img src="https://cdn.animeav1.com/backdrops/2067.jpg" alt="Banner Login" class="login-banner">
        
        <form class="login-form" id="loginForm">
        <h2>Ingresar</h2>
        
        <div id="loginMessage" style="margin-bottom: 15px; min-height: 20px; font-size: 0.9rem; text-align: center; font-weight: bold;"></div>

        <input type="text" id="email" name="email" placeholder="Correo Electr√≥nico" required>
        <input type="password" id="password" name="password" placeholder="Contrase√±a" required>
        
        <button type="submit" class="btn-primary">Entrar</button>
      </form>
      </div>
    </div>

    <script> 
        function openLogin() {
          document.getElementById('login-modal').style.display = 'flex';
        }

        function closeLogin() {
          document.getElementById('login-modal').style.display = 'none';
        }

function closeOnOutsideClick(event) {
  const modal = document.getElementById('login-modal');
  const box = modal.querySelector('.login-content');

  if (box && !box.contains(event.target)) {
    closeLogin();
  }
}

    </script>
    
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="initPag.html">üê∂ TechSide Vet</a>
      <nav class="main-nav" aria-label="Navegaci√≥n principal">
        <a class="active" href="initPag.html">Inicio</a>
        <a href="prodCatalog.html">Tienda</a>
        <a href="horario.html">Disponibilidad</a>
        <a href="listas.html">Mis mascotas</a>
        <a href="regUser.html">Mi cuenta</a>
      </nav>
      <div class="header-actions">
        <button class="btn-ghost" ><a href="formAgregar.html">Registrarse</a></button>
        <button class="btn-primary" onclick="openLogin()">Entrar</button>
      </div>
    </div>
  </header>

        <section class="services">
            <div class="container">
                <div class="section-title">
                    <h2>Nuestros Servicios</h2>
                    <p>Ofrecemos atenci√≥n m√©dica integral para todas las especies con equipos de √∫ltima generaci√≥n</p>
                </div>
                <div class="grid grid-4">
                    <div class="card">
                        <div class="card-icon">‚ù§Ô∏è</div>
                        <h3>Consultas Generales</h3>
                        <p>Revisiones completas para mantener la salud de tu mascota</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">üõ°Ô∏è</div>
                        <h3>Vacunaci√≥n</h3>
                        <p>Programas de vacunaci√≥n personalizados y seguros</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">‚è∞</div>
                        <h3>Urgencias 24/7</h3>
                        <p>Atenci√≥n de emergencia disponible las 24 horas</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">üèÜ</div>
                        <h3>Cirug√≠as</h3>
                        <p>Procedimientos quir√∫rgicos con tecnolog√≠a avanzada</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="promotions">
            <div class="container">
                <div class="section-title">
                    <h2>Promociones Especiales</h2>
                    <p>Aprovecha nuestras ofertas exclusivas para el cuidado de tu mascota</p>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="badge">20% OFF</div>
                        <h3>Consulta + Vacunaci√≥n</h3>
                        <p>Paquete completo de revisi√≥n y vacunas</p>
                        <div class="price">$120 <span class="original-price">$150</span></div>
                        <button>Reservar Ahora</button>
                    </div>
                    <div class="card">
                        <div class="badge">15% OFF</div>
                        <h3>Ba√±o y Corte Premium</h3>
                        <p>Servicio completo de est√©tica canina</p>
                        <div class="price">$68 <span class="original-price">$80</span></div>
                        <button>Reservar Ahora</button>
                    </div>
                    <div class="card">
                        <div class="badge">25% OFF</div>
                        <h3>Desparasitaci√≥n Completa</h3>
                        <p>Tratamiento interno y externo</p>
                        <div class="price">$75 <span class="original-price">$100</span></div>
                        <button>Reservar Ahora</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="testimonials">
            <div class="container">
                <div class="section-title">
                    <h2>Lo que dicen nuestros clientes</h2>
                    <p>La satisfacci√≥n de nuestros clientes y sus mascotas es nuestra mayor recompensa</p>
                </div>
                <div class="grid grid-3">
                    <div class="card testimonial">
                        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <h3>Mar√≠a Gonz√°lez</h3>
                        <p>Due√±o de Golden Retriever</p>
                        <p>"Excelente atenci√≥n, mi perro Max se siente como en casa aqu√≠."</p>
                    </div>
                    <div class="card testimonial">
                        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <h3>Carlos Rodr√≠guez</h3>
                        <p>Due√±o de Gato Persa</p>
                        <p>"Profesionales incre√≠bles, salvaron la vida de mi gata Luna."</p>
                    </div>
                    <div class="card testimonial">
                        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <h3>Ana Mart√≠nez</h3>
                        <p>Due√±o de Labrador</p>
                        <p>"La mejor cl√≠nica veterinaria de la ciudad, sin duda."</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta">
            <div class="container">
                <h2>¬øListo para cuidar a tu mascota?</h2>
                <p>Agenda una cita hoy mismo y descubre por qu√© somos la cl√≠nica veterinaria de confianza para miles de familias</p>
                <div class="cta-buttons">
                    <button>Agendar Cita Ahora</button>
                    <button class="whatsapp">Contactar por WhatsApp</button>
                </div>
            </div>
        </section>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>¬© <span id="year"></span> TechSide</p>
      <small class="muted">T√©rminos y condiciones ¬∑ Pol√≠tica de privacidad</small>
    </div>
  </footer>

  <script>
    // --- L√ìGICA VISUAL ---
    function openLogin() { 
        document.getElementById('login-modal').style.display = 'flex'; 
        // Limpiar mensajes anteriores al abrir
        const msg = document.getElementById('loginMessage');
        if(msg) msg.textContent = '';
    }
    function closeLogin() { document.getElementById('login-modal').style.display = 'none'; }
    
    const yearSpan = document.getElementById('year');
    if(yearSpan) yearSpan.textContent = new Date().getFullYear();

    // --- L√ìGICA DE LOGIN (AUTO) ---
    const loginForm = document.getElementById('loginForm');
    const msgDiv = document.getElementById('loginMessage'); // Referencia al div de mensajes
    
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault(); 
            
            // Feedback visual inmediato (Cargando...)
            msgDiv.style.color = '#666';
            msgDiv.textContent = 'Verificando...';

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                // RECUERDA: Cambia 3000 por el puerto que diga tu consola de Node
                const response = await fetch('http://localhost:3000/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    // --- √âXITO ---
                    msgDiv.style.color = 'green';
                    msgDiv.textContent = '¬°Bienvenido! Entrando...'; // Mensaje en el div
                    
                    // Guardar sesi√≥n
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    // Esperar 1.5 segundos y continuar autom√°tico
                    setTimeout(() => {
                        closeLogin();
                        if(data.user.rol === 'admin') {
                            window.location.href = '../admin/dashboard.html'; 
                        } else {
                            window.location.href = '../admin/regUser.html'; 
                        }
                    }, 1500);

                } else {
                    // --- ERROR DE DATOS ---
                    msgDiv.style.color = 'red';
                    msgDiv.textContent = data.message || 'Correo o contrase√±a incorrectos';
                }
            } catch (error) {
                // --- ERROR DE CONEXI√ìN ---
                console.error(error);
                msgDiv.style.color = 'red';
                msgDiv.textContent = 'Error: No se pudo conectar con el servidor.';
            }
        });
    }
  </script>
</body>
</html>
<script src="../js/session.js"></script>
